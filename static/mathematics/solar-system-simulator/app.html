<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar System Simulator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%23fdfbf6'/><rect x='5' y='5' width='90' height='90' fill='none' stroke='%231a1a1a' stroke-width='4'/><text x='50' y='78' font-family='Georgia, serif' font-size='75' font-weight='bold' text-anchor='middle' fill='%231a1a1a'>R</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
        }

        #canvas {
            display: block;
            background: radial-gradient(circle at center, #0a0a1a 0%, #000 100%);
        }

        #controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(20, 20, 40, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(100, 100, 200, 0.3);
            backdrop-filter: blur(10px);
            max-width: 300px;
        }

        #controls h2 {
            margin-bottom: 15px;
            color: #8af;
            font-size: 18px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #aac;
        }

        input[type="datetime-local"],
        input[type="range"],
        select {
            width: 100%;
            padding: 8px;
            background: rgba(30, 30, 50, 0.8);
            border: 1px solid rgba(100, 100, 200, 0.5);
            border-radius: 5px;
            color: #fff;
            font-size: 14px;
        }

        input[type="range"] {
            padding: 3px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        button {
            flex: 1;
            padding: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 5px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        #speed-display {
            text-align: center;
            margin-top: 5px;
            color: #8af;
            font-size: 12px;
        }

        #date-display {
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background: rgba(30, 30, 50, 0.5);
            border-radius: 5px;
            font-size: 14px;
            color: #fff;
        }

        #legend {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(20, 20, 40, 0.9);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(100, 100, 200, 0.3);
            backdrop-filter: blur(10px);
        }

        #legend h3 {
            margin-bottom: 10px;
            color: #8af;
            font-size: 16px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .planet-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        #zoom-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .zoom-btn {
            width: 40px;
            height: 40px;
            font-size: 20px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }

        input[type="checkbox"] {
            width: auto;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <div id="controls">
        <h2>Solar System Controls</h2>
        
        <div class="control-group">
            <label for="date-input">Set Date & Time:</label>
            <input type="datetime-local" id="date-input" step="1">
        </div>
        
        <div class="control-group">
            <label for="speed-slider">Simulation Speed:</label>
            <input type="range" id="speed-slider" min="-100" max="100" value="1">
            <div id="speed-display">1x speed (1 day/second)</div>
        </div>
        
        <div class="button-group">
            <button id="play-btn">Play</button>
            <button id="pause-btn">Pause</button>
            <button id="reset-btn">Now</button>
        </div>
        
        <div id="date-display">Current Date: Loading...</div>
        
        <div class="control-group">
            <label>Display Options:</label>
            <div class="checkbox-group">
                <input type="checkbox" id="show-orbits" checked>
                <label for="show-orbits">Show Orbits</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="show-labels" checked>
                <label for="show-labels">Show Labels</label>
            </div>
        </div>
    </div>
    
    <div id="legend">
        <h3>Planets</h3>
        <div class="legend-item">
            <div class="planet-dot" style="background: #FDB813;"></div>
            <span>Sun</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #8C7853;"></div>
            <span>Mercury</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #FFC649;"></div>
            <span>Venus</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #4A90E2;"></div>
            <span>Earth</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #CD5C5C;"></div>
            <span>Mars</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #DAA520;"></div>
            <span>Jupiter</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #F4E8C1;"></div>
            <span>Saturn</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #4FD0E0;"></div>
            <span>Uranus</span>
        </div>
        <div class="legend-item">
            <div class="planet-dot" style="background: #4B70DD;"></div>
            <span>Neptune</span>
        </div>
    </div>
    
    <div id="zoom-controls">
        <button class="zoom-btn" id="zoom-in">+</button>
        <button class="zoom-btn" id="zoom-out">−</button>
        <button class="zoom-btn" id="zoom-reset">⟲</button>
    </div>

    <script>
        // Canvas setup
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Resize canvas to window
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Orbital elements for planets (J2000 epoch)
        // Data from NASA JPL
        const planets = [
            {
                name: 'Mercury',
                color: '#8C7853',
                a: 0.38709893,  // semi-major axis (AU)
                e: 0.20563069,  // eccentricity
                i: 7.00487,     // inclination (degrees)
                L: 252.25084,   // mean longitude (degrees)
                ϖ: 77.45645,    // longitude of perihelion (degrees)
                Ω: 48.33167,    // longitude of ascending node (degrees)
                period: 87.969,  // orbital period (days)
                radius: 2439.7,  // radius (km)
                displayRadius: 4
            },
            {
                name: 'Venus',
                color: '#FFC649',
                a: 0.72333199,
                e: 0.00677323,
                i: 3.39471,
                L: 181.97973,
                ϖ: 131.53298,
                Ω: 76.68069,
                period: 224.701,
                radius: 6051.8,
                displayRadius: 6
            },
            {
                name: 'Earth',
                color: '#4A90E2',
                a: 1.00000011,
                e: 0.01671022,
                i: 0.00005,
                L: 100.46435,
                ϖ: 102.94719,
                Ω: -11.26064,
                period: 365.256,
                radius: 6371.0,
                displayRadius: 6
            },
            {
                name: 'Mars',
                color: '#CD5C5C',
                a: 1.52366231,
                e: 0.09341233,
                i: 1.85061,
                L: 355.45332,
                ϖ: 336.04084,
                Ω: 49.57854,
                period: 686.980,
                radius: 3389.5,
                displayRadius: 5
            },
            {
                name: 'Jupiter',
                color: '#DAA520',
                a: 5.20336301,
                e: 0.04839266,
                i: 1.30530,
                L: 34.40438,
                ϖ: 14.75385,
                Ω: 100.55615,
                period: 4332.589,
                radius: 69911,
                displayRadius: 12
            },
            {
                name: 'Saturn',
                color: '#F4E8C1',
                a: 9.53707032,
                e: 0.05415060,
                i: 2.48446,
                L: 49.94432,
                ϖ: 92.59887,
                Ω: 113.71504,
                period: 10759.22,
                radius: 58232,
                displayRadius: 10
            },
            {
                name: 'Uranus',
                color: '#4FD0E0',
                a: 19.19126393,
                e: 0.04716771,
                i: 0.76986,
                L: 313.23218,
                ϖ: 170.96424,
                Ω: 74.22988,
                period: 30685.4,
                radius: 25362,
                displayRadius: 8
            },
            {
                name: 'Neptune',
                color: '#4B70DD',
                a: 30.06896348,
                e: 0.00858587,
                i: 1.76917,
                L: 304.88003,
                ϖ: 44.97135,
                Ω: 131.72169,
                period: 60189,
                radius: 24622,
                displayRadius: 8
            }
        ];
        
        // Simulation state
        let currentDate = new Date();
        let isPlaying = false;
        let simulationSpeed = 1; // days per second
        let zoom = 1;
        let offsetX = 0;
        let offsetY = 0;
        let showOrbits = true;
        let showLabels = true;
        
        // J2000 epoch reference
        const J2000 = new Date('2000-01-01T12:00:00Z');
        
        // Convert date to Julian Date
        function dateToJulian(date) {
            return (date.getTime() / 86400000) + 2440587.5;
        }
        
        // Calculate days since J2000
        function daysSinceJ2000(date) {
            const jd = dateToJulian(date);
            const jdJ2000 = 2451545.0;
            return jd - jdJ2000;
        }
        
        // Solve Kepler's equation using Newton's method
        function solveKeplersEquation(M, e, tolerance = 1e-8) {
            // M = mean anomaly, e = eccentricity
            // We need to find E (eccentric anomaly) such that M = E - e*sin(E)
            
            M = M % (2 * Math.PI);
            let E = M; // Initial guess
            
            for (let i = 0; i < 30; i++) {
                const deltaE = (E - e * Math.sin(E) - M) / (1 - e * Math.cos(E));
                E -= deltaE;
                if (Math.abs(deltaE) < tolerance) break;
            }
            
            return E;
        }
        
        // Calculate planet position at given date
        function calculatePlanetPosition(planet, date) {
            const T = daysSinceJ2000(date) / 36525; // centuries since J2000
            const d = daysSinceJ2000(date);
            
            // Mean anomaly
            const n = 2 * Math.PI / planet.period; // mean motion
            const M = (planet.L - planet.ϖ) * Math.PI / 180 + n * d;
            
            // Solve Kepler's equation for eccentric anomaly
            const E = solveKeplersEquation(M, planet.e);
            
            // True anomaly
            const v = 2 * Math.atan2(
                Math.sqrt(1 + planet.e) * Math.sin(E / 2),
                Math.sqrt(1 - planet.e) * Math.cos(E / 2)
            );
            
            // Distance from sun
            const r = planet.a * (1 - planet.e * Math.cos(E));
            
            // Position in orbital plane
            const xOrbital = r * Math.cos(v);
            const yOrbital = r * Math.sin(v);
            
            // Convert to ecliptic coordinates (simplified, ignoring inclination for 2D view)
            const ω = (planet.ϖ - planet.Ω) * Math.PI / 180;
            const Ω = planet.Ω * Math.PI / 180;
            
            const x = xOrbital * Math.cos(ω + Ω) - yOrbital * Math.sin(ω + Ω);
            const y = xOrbital * Math.sin(ω + Ω) + yOrbital * Math.cos(ω + Ω);
            
            return { x, y };
        }
        
        // Draw functions
        function drawSun() {
            const centerX = canvas.width / 2 + offsetX;
            const centerY = canvas.height / 2 + offsetY;
            
            // Sun glow
            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 30 * zoom);
            gradient.addColorStop(0, 'rgba(253, 184, 19, 1)');
            gradient.addColorStop(0.4, 'rgba(253, 184, 19, 0.6)');
            gradient.addColorStop(1, 'rgba(253, 184, 19, 0)');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(centerX, centerY, 30 * zoom, 0, 2 * Math.PI);
            ctx.fill();
            
            // Sun core
            ctx.fillStyle = '#FDB813';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 12 * zoom, 0, 2 * Math.PI);
            ctx.fill();
            
            if (showLabels) {
                ctx.fillStyle = '#FDB813';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Sun', centerX, centerY - 20 * zoom);
            }
        }
        
        function drawPlanet(planet, position) {
            const scale = 100 * zoom; // pixels per AU
            const centerX = canvas.width / 2 + offsetX;
            const centerY = canvas.height / 2 + offsetY;
            
            const x = centerX + position.x * scale;
            const y = centerY - position.y * scale; // flip y-axis
            
            // Draw orbit
            if (showOrbits) {
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.ellipse(centerX, centerY, planet.a * scale, planet.a * scale * Math.sqrt(1 - planet.e * planet.e), 
                           -planet.ϖ * Math.PI / 180, 0, 2 * Math.PI);
                ctx.stroke();
            }
            
            // Calculate display radius
            let displayRadius = planet.displayRadius;
            
            // Planet glow
            const glowGradient = ctx.createRadialGradient(x, y, 0, x, y, displayRadius * zoom * 2);
            glowGradient.addColorStop(0, planet.color + 'FF');
            glowGradient.addColorStop(0.5, planet.color + '40');
            glowGradient.addColorStop(1, planet.color + '00');
            ctx.fillStyle = glowGradient;
            ctx.beginPath();
            ctx.arc(x, y, displayRadius * zoom * 2, 0, 2 * Math.PI);
            ctx.fill();
            
            // Planet
            ctx.fillStyle = planet.color;
            ctx.beginPath();
            ctx.arc(x, y, displayRadius * zoom, 0, 2 * Math.PI);
            ctx.fill();
            
            // Label
            if (showLabels) {
                ctx.fillStyle = '#fff';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(planet.name, x, y - (displayRadius * zoom + 10));
            }
        }
        
        // Animation loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw starfield
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            for (let i = 0; i < 100; i++) {
                const x = (Math.sin(i * 12.9898) * 43758.5453) % 1 * canvas.width;
                const y = (Math.sin(i * 78.233) * 43758.5453) % 1 * canvas.height;
                const size = (Math.sin(i * 94.673) * 43758.5453) % 1 + 0.5;
                ctx.fillRect(x, y, size, size);
            }
            
            drawSun();
            
            // Draw planets
            planets.forEach(planet => {
                const position = calculatePlanetPosition(planet, currentDate);
                drawPlanet(planet, position);
            });
            
            // Update date display with leading zeros for consistent width
            const year = currentDate.getFullYear();
            const month = String(currentDate.getMonth() + 1).padStart(2, '0');
            const day = String(currentDate.getDate()).padStart(2, '0');
            const hours = String(currentDate.getHours()).padStart(2, '0');
            const minutes = String(currentDate.getMinutes()).padStart(2, '0');
            const seconds = String(currentDate.getSeconds()).padStart(2, '0');
            
            document.getElementById('date-display').textContent = 
                `Current Date: ${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
            
            // Update simulation
            if (isPlaying) {
                const millisecondsPerDay = 86400000;
                const speedMultiplier = Math.pow(10, Math.abs(simulationSpeed) / 20);
                const timeStep = simulationSpeed >= 0 ? 
                    speedMultiplier * millisecondsPerDay / 60 : 
                    -speedMultiplier * millisecondsPerDay / 60;
                currentDate = new Date(currentDate.getTime() + timeStep);
            }
            
            requestAnimationFrame(animate);
        }
        
        // Controls
        const dateInput = document.getElementById('date-input');
        const speedSlider = document.getElementById('speed-slider');
        const speedDisplay = document.getElementById('speed-display');
        const playBtn = document.getElementById('play-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        // Set initial date
        function setDateInput(date) {
            const localDate = new Date(date.getTime() - date.getTimezoneOffset() * 60000);
            dateInput.value = localDate.toISOString().slice(0, 16);
        }
        setDateInput(currentDate);
        
        // Date input handler
        dateInput.addEventListener('change', (e) => {
            currentDate = new Date(e.target.value);
        });
        
        // Speed slider handler
        speedSlider.addEventListener('input', (e) => {
            simulationSpeed = parseFloat(e.target.value);
            
            let speedText;
            if (simulationSpeed === 0) {
                speedText = 'Paused';
            } else {
                const speedMultiplier = Math.pow(10, Math.abs(simulationSpeed) / 20);
                const direction = simulationSpeed >= 0 ? 'forward' : 'reverse';
                
                if (speedMultiplier < 1) {
                    speedText = `${speedMultiplier.toFixed(2)}x speed (${direction})`;
                } else if (speedMultiplier < 30) {
                    speedText = `${speedMultiplier.toFixed(1)}x speed (${speedMultiplier.toFixed(1)} days/sec, ${direction})`;
                } else if (speedMultiplier < 365) {
                    speedText = `${speedMultiplier.toFixed(0)}x speed (~${(speedMultiplier/30).toFixed(1)} months/sec, ${direction})`;
                } else {
                    speedText = `${speedMultiplier.toFixed(0)}x speed (~${(speedMultiplier/365).toFixed(1)} years/sec, ${direction})`;
                }
            }
            
            speedDisplay.textContent = speedText;
        });
        
        // Play/Pause buttons
        playBtn.addEventListener('click', () => {
            isPlaying = true;
            playBtn.classList.add('active');
            pauseBtn.classList.remove('active');
        });
        
        pauseBtn.addEventListener('click', () => {
            isPlaying = false;
            pauseBtn.classList.add('active');
            playBtn.classList.remove('active');
        });
        
        // Reset button
        resetBtn.addEventListener('click', () => {
            currentDate = new Date();
            setDateInput(currentDate);
        });
        
        // Zoom controls
        document.getElementById('zoom-in').addEventListener('click', () => {
            zoom *= 1.2;
        });
        
        document.getElementById('zoom-out').addEventListener('click', () => {
            zoom /= 1.2;
        });
        
        document.getElementById('zoom-reset').addEventListener('click', () => {
            zoom = 1;
            offsetX = 0;
            offsetY = 0;
        });
        
        // Display options
        document.getElementById('show-orbits').addEventListener('change', (e) => {
            showOrbits = e.target.checked;
        });
        
        document.getElementById('show-labels').addEventListener('change', (e) => {
            showLabels = e.target.checked;
        });
        
        // Mouse pan
        let isDragging = false;
        let dragStartX, dragStartY;
        
        canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            dragStartX = e.clientX - offsetX;
            dragStartY = e.clientY - offsetY;
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                offsetX = e.clientX - dragStartX;
                offsetY = e.clientY - dragStartY;
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });
        
        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
        });
        
        // Mouse wheel zoom
        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomSpeed = 1.1;
            if (e.deltaY < 0) {
                zoom *= zoomSpeed;
            } else {
                zoom /= zoomSpeed;
            }
        });
        
        // Start animation
        animate();
    </script>
</body>
</html>